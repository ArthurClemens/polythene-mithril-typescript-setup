{"version":3,"file":"polythene-core-tabs.js","sources":["../../polythene-css-classes/button.js","../../polythene-css-classes/tabs.js","../src/tabs.js","../src/tab.js","../src/scroll-button.js"],"sourcesContent":["\nexport default {\n  component:        \"pe-text-button\",\n  super:            \"pe-button\",\n  row:              \"pe-button-row\",\n      \n  // elements      \n  content:          \"pe-button__content\",\n  label:            \"pe-button__label\",\n  textLabel:        \"pe-button__text-label\",\n  wash:             \"pe-button__wash\",\n  dropdown:         \"pe-button__dropdown\",\n      \n  // states      \n  border:           \"pe-button--border\",\n  contained:        \"pe-button--contained\",\n  disabled:         \"pe-button--disabled\",\n  dropdownClosed:   \"pe-button--dropdown-closed\",\n  dropdownOpen:     \"pe-button--dropdown-open\",\n  extraWide:        \"pe-button--extra-wide\",\n  hasDropdown:      \"pe-button--dropdown\",\n  highLabel:        \"pe-button--high-label\",\n  inactive:         \"pe-button--inactive\",\n  raised:           \"pe-button--raised\",\n  selected:         \"pe-button--selected\",\n  separatorAtStart: \"pe-button--separator-start\",\n};\n","import buttonClasses from \"./button\";\n\nexport default {\n  component:            \"pe-tabs\",\n\n  // elements\n  indicator:            \"pe-tabs__indicator\",\n  scrollButton:         \"pe-tabs__scroll-button\",\n  scrollButtonAtEnd:    \"pe-tabs__scroll-button-end\",\n  scrollButtonAtStart:  \"pe-tabs__scroll-button-start\",\n  tab:                  \"pe-tab\",\n  tabContent:           \"pe-tabs__tab-content\",\n  tabRow:               \"pe-tabs__row\",\n\n  // states\n  activeSelectable:     \"pe-tabs__active--selectable\",\n  isAtEnd:              \"pe-tabs--end\",\n  isAtStart:            \"pe-tabs--start\",\n  isAutofit:            \"pe-tabs--autofit\",\n  isMenu:               \"pe-tabs--menu\",\n  scrollable:           \"pe-tabs--scrollable\",\n  compactTabs:          \"pe-tabs--compact\",\n  tabHasIcon:           \"pe-tabs__tab--icon\",\n  tabRowCentered:       \"pe-tabs__row--centered\",\n  tabRowIndent:         \"pe-tabs__row--indent\",\n\n  // lookup\n  label:                buttonClasses.label\n};","import { filterSupportedAttributes, isTouch, subscribe, unsubscribe, isRTL, deprecation } from \"polythene-core\";\nimport { scrollTo } from \"polythene-utilities\";\nimport classes from \"polythene-css-classes/tabs\";\n\nconst SCROLL_SPEED                 = 600; // px per second\nconst SCROLL_DELAY                 = .15; // seconds\nconst SCROLL_MIN_DURATION          = .5; // seconds\nconst INDICATOR_SLIDE_MIN_DURATION = .25; // seconds\n\nconst whenCreateDone = () => Promise.resolve();\n\nconst getIndex = (state, attrs) => {\n  const attrsSelectedTabIndex = attrs.selectedTabIndex !== undefined\n    ? attrs.selectedTabIndex\n    : attrs.selectedTab !== undefined // deprecated\n      ? attrs.selectedTab\n      : undefined;\n  return attrsSelectedTabIndex !== undefined\n    ? attrsSelectedTabIndex\n    : Array.isArray(attrs.tabs)\n      ? attrs.tabs.reduce((acc, tab, index) => (\n        acc === undefined && !tab.disabled\n          ? index\n          : acc\n      ), undefined)\n      : undefined;\n};\n\nconst scrollButtonGetNewIndex = (index, tabs) => {\n  const minTabIndex = 0;\n  const maxTabIndex = tabs.length - 1;\n  return {\n    backward: Math.max(index - 1, minTabIndex),\n    forward: Math.min(index + 1, maxTabIndex)\n  };\n};\n\nconst handleScrollButtonClick = (state, attrs, e, direction) => {\n  e.stopPropagation();\n  e.preventDefault();\n  const currentTabIndex = state.selectedTabIndex();\n  const newIndex = scrollButtonGetNewIndex(currentTabIndex, state.tabs)[direction];\n  if (newIndex !== currentTabIndex) {\n    setSelectedTab(state, attrs, newIndex, true);\n  } else {\n    scrollToTab(state, newIndex);\n  }\n};\n\nconst scrollToTab = (state, tabIndex) => {\n  const tabs = state.tabs;\n  const scroller = state.tabRowEl;\n  // Scroll to position of selected tab\n  const tabLeft = tabs.slice(0, tabIndex).reduce((totalWidth, tabData) =>\n    totalWidth + tabData.dom.getBoundingClientRect().width, 0);\n  // Tabs at the far right will not fully move to the left\n  // because the scrollable row will stick to the right \n  // to get the max scroll left, we subtract the visible viewport from the scroll width\n  const scrollerWidth = scroller.getBoundingClientRect().width; // frame width\n  const scrollingWidth = scroller.scrollWidth;\n  const maxScroll = scrollingWidth - scrollerWidth;\n  const left = state.isRTL\n    ? -1 * Math.min(tabLeft, maxScroll)\n    : Math.min(tabLeft, maxScroll);\n  const currentLeft = scroller.scrollLeft;\n  if (currentLeft !== left) {\n    const duration = Math.abs(currentLeft - left) / SCROLL_SPEED;\n    const delaySeconds = SCROLL_DELAY;\n    setTimeout(() => {\n      scrollTo({\n        element: scroller,\n        to: left,\n        duration: Math.max(SCROLL_MIN_DURATION, duration),\n        direction: \"horizontal\"\n      }).then(() => updateScrollButtons(state));\n    }, delaySeconds * 1000);\n  }\n};\n\nconst updateScrollButtons = state => {\n  const tabRowEl = state.tabRowEl;\n  const scrollLeft = tabRowEl.scrollLeft;\n  const currentTabIndex = state.selectedTabIndex();\n  const tabsEl = state.tabsEl;\n  const minTabIndex = 0;\n  const maxTabIndex = state.tabs.length - 1;\n  const isAtStart = (tabRowEl.scrollLeft === 0) && (currentTabIndex === minTabIndex);\n  const isAtEnd = (scrollLeft >= (tabRowEl.scrollWidth - tabsEl.getBoundingClientRect().width - 1)) && (currentTabIndex === maxTabIndex);\n  state.scrollButtonAtStart(isAtStart);\n  state.scrollButtonAtEnd(isAtEnd);\n};\n\nconst animateIndicator = (selectedTabEl, animate, state) => {\n  const parentRect = state.tabsEl.getBoundingClientRect();\n  const rect = selectedTabEl.getBoundingClientRect();\n  const buttonSize = state.managesScroll ? rect.height : 0;\n  const translateX = state.isRTL\n    ? rect.right - parentRect.right + state.tabRowEl.scrollLeft + buttonSize\n    : rect.left - parentRect.left + state.tabRowEl.scrollLeft - buttonSize;\n  const scaleX = 1 / (parentRect.width - 2 * buttonSize) * rect.width;\n  const transformCmd = `translate(${translateX}px, 0) scaleX(${scaleX})`;\n  const duration = animate\n    ? INDICATOR_SLIDE_MIN_DURATION\n    : 0;\n  const style = state.tabIndicatorEl.style;\n  style[\"transition-duration\"] = duration + \"s\";\n  style.transform = transformCmd;\n};\n\nconst setSelectedTab = (state, attrs, index, animate) => {\n  state.selectedTabIndex(index);\n  if (!state.tabs.length) return;\n  const selectedTabEl = state.tabs[index].dom;\n  if (selectedTabEl && state.tabIndicatorEl && state.tabsEl) {\n    animateIndicator(selectedTabEl, animate, state);\n  }\n  if (state.managesScroll) {\n    updateScrollButtons(state);\n  }\n  scrollToTab(state, index);\n  if (attrs.onChange) {\n    attrs.onChange({\n      index,\n      options: state.tabs[index].attrs,\n      el: selectedTabEl\n    });\n  }\n};\n\nconst sortByLargestWidth = (a, b) =>\n  a < b\n    ? 1\n    : a > b\n      ? -1\n      : 0;\n\nexport const getInitialState = (vnode, createStream) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.selectedTab !== undefined) {\n    deprecation(\"Tabs\", { option: \"selectedTab\", newOption: \"selectedTabIndex\" });\n  }\n  const tabIndex = getIndex(state, attrs) || 0;\n  const selectedTabIndex = createStream(tabIndex);\n  const scrollButtonAtStart = createStream(true);\n  const scrollButtonAtEnd = createStream(true);\n  const registerTabButton = state =>\n    (index, data) => state.tabs[index] = data;\n  const registerScrollButton = state =>\n    (position, dom) => state.scrollButtons[position] = dom;\n  return {\n    tabsEl:                   undefined,\n    tabRowEl:                 undefined,\n    tabs:                     [], // {data, el}\n    tabRow:                   undefined,\n    tabIndicatorEl:           undefined,\n    selectedTabIndex,\n    previousSelectedTabIndex: undefined,\n    managesScroll:            attrs.scrollable && !isTouch,\n    scrollButtonAtStart,\n    scrollButtonAtEnd,\n    scrollButtons: {\n      start: undefined,\n      end: undefined\n    },\n    registerTabButton,\n    registerScrollButton,\n    isRTL:                    false,\n    cleanUp:                  undefined, // set in onMount\n    redrawOnUpdate:           createStream.merge([selectedTabIndex, scrollButtonAtStart, scrollButtonAtEnd])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  state.tabsEl = dom;\n  state.isRTL = isRTL({ element: dom });\n  if (!attrs.hideIndicator) {\n    state.tabIndicatorEl = dom.querySelector(`.${classes.indicator}`);\n  }\n  state.tabRowEl = dom.querySelector(`.${classes.tabRow}`);\n\n  const redrawLargestWidth = () => {\n    if (state.tabs && attrs.largestWidth) {\n      const widths = state.tabs.map(tabData => tabData.dom.getBoundingClientRect().width);\n      const largest = widths.sort(sortByLargestWidth)[0];\n      state.tabs.forEach(tabData => tabData.dom.style.width = largest + \"px\");\n    }\n  };\n\n  const redraw = () => (\n    redrawLargestWidth(),\n    setSelectedTab(state, attrs, state.selectedTabIndex(), false)\n  );\n\n  const handleFontEvent = ({ name }) =>\n    name === \"active\" || name === \"inactive\"\n      ? redraw()\n      : null;\n\n  subscribe(\"resize\", redraw);\n  subscribe(\"webfontloader\", handleFontEvent);\n\n  state.cleanUp = () => (\n    unsubscribe(\"resize\", redraw),\n    unsubscribe(\"webfontloader\", handleFontEvent)\n  );\n\n  // A promise can't resolve during the oncreate loop\n  // The Mithril draw loop is synchronous - there is no delay between one this oncreate and the tab button's oncreate\n  whenCreateDone().then(redraw);\n};\n\nexport const onUnMount = ({ state }) =>\n  state.cleanUp();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const autofit = attrs.scrollable || attrs.centered\n    ? false\n    : attrs.autofit\n      ? true\n      : false;\n\n  // Keep selected tab up to date\n  const index = getIndex(state, attrs);\n  if (index !== undefined && state.previousSelectedTabIndex !== index) {\n    setSelectedTab(state, attrs, index, true);\n  }\n  state.previousSelectedTabIndex = index;\n\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.scrollable ? classes.scrollable : null,\n        state.scrollButtonAtStart() ? classes.isAtStart : null,\n        state.scrollButtonAtEnd() ? classes.isAtEnd : null,\n        attrs.activeSelected ? classes.activeSelectable : null,\n        autofit ? classes.isAutofit : null,\n        attrs.compact ? classes.compactTabs : null,\n        attrs.menu ? classes.isMenu : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, Tab, ScrollButton }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  const buttons = attrs.content\n    ? attrs.content\n    : attrs.tabs\n      ? attrs.tabs\n      : attrs.children || vnode.children || [];\n\n  if (buttons.length === 0) {\n    console.error(\"No tabs specified\"); // eslint-disable-line no-console\n  }\n\n  const tabRow = buttons.map((buttonOpts = {}, index) => {\n    const buttonOptsCombined = Object.assign(\n      {},\n      buttonOpts,\n      {\n        // These options can be overridden by `all`\n        selected: index === state.selectedTabIndex(),\n        animateOnTap: (attrs.animateOnTap !== false) ? true : false\n      },\n      attrs.all,\n      {\n        // Internal options, should not get overridden\n        index,\n        key: buttonOpts.key || `tab-${index}`,\n        register: state.registerTabButton(state),\n        onSelect: () =>\n          setSelectedTab(state, attrs, index, attrs.noIndicatorSlide ? false : true)\n      }\n    );\n    return h(Tab, buttonOptsCombined);\n  });\n\n  let scrollButtonAtStart, scrollButtonAtEnd;\n  if (attrs.scrollable) {\n    scrollButtonAtStart = h(ScrollButton, Object.assign(\n      {},\n      {\n        key: \"backward\",\n        icon: attrs.scrollIconBackward,\n        className: classes.scrollButtonAtStart,\n        position: \"start\",\n        register: state.registerScrollButton(state),\n        events: { [k.onclick]: e => handleScrollButtonClick(state, attrs, e, \"backward\") },\n        isRTL: state.isRTL\n      }\n    ));\n    scrollButtonAtEnd = h(ScrollButton, Object.assign(\n      {},\n      {\n        key: \"forward\",\n        icon: attrs.scrollIconForward,\n        className: classes.scrollButtonAtEnd,\n        position: \"end\",\n        register: state.registerScrollButton(state),\n        events: { [k.onclick]: e => handleScrollButtonClick(state, attrs, e, \"forward\") },\n        isRTL: state.isRTL\n      }\n    ));\n  }\n\n  const tabIndicator = attrs.hideIndicator\n    ? null\n    : h(\"div\",\n      {\n        key: \"indicator\",\n        className: classes.indicator\n      }\n    );\n\n  return [\n    attrs.scrollable ? scrollButtonAtStart : null,\n    h(\"div\",\n      {\n        key: \"tabrow\",\n        className: [\n          classes.tabRow,\n          attrs.centered ? classes.tabRowCentered : null,\n          attrs.scrollable ? classes.tabRowIndent : null\n        ].join(\" \")\n      },\n      [\n        tabRow,\n        tabIndicator\n      ]\n    ),\n    attrs.scrollable ? scrollButtonAtEnd : null\n  ];\n};","import classes from \"polythene-css-classes/tabs\";\n\n// Don't export 'element': it will be the wrapped Button component (set in polythene-xxx-tabs/tab)\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const attrs = vnode.attrs;\n  attrs.register(attrs.index, {\n    attrs,\n    dom\n  });\n};\n\nexport const createProps = (vnode, { renderer: h, keys: k, Icon }) => {\n  const attrs = vnode.attrs;\n  // Let internal onclick function co-exist with passed button option\n  attrs.events = attrs.events || {};\n  attrs.events[k.onclick] = attrs.events[k.onclick] || (() => {});\n  return Object.assign(\n    {},\n    attrs,\n    {\n      content: h(\"div\",\n        { className: classes.tabContent },\n        [\n          attrs.icon ? h(Icon, attrs.icon) : null,\n          attrs.label\n            ? h(\"div\",\n              { className: classes.label },\n              h(\"span\", attrs.label)\n            )\n            : null,\n        ]),\n      className: [\n        classes.tab,\n        attrs.icon && attrs.label ? classes.tabHasIcon : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n      selected: attrs.selected,\n      wash: false,\n      ripple: true,\n      events: Object.assign(\n        {},\n        attrs.events,\n        {\n          [k.onclick]: e => {\n            attrs.onSelect();\n            attrs.events[k.onclick](e);\n          }\n        }\n      )\n    }\n  );\n};\n\nexport const createContent = vnode =>\n  vnode.children;\n","import classes from \"polythene-css-classes/tabs\";\n\n// Don't export 'element': it will be the wrapped IconButton component (set in polythene-xxx-tabs/scroll-button)\n\nconst arrowBackward = \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\\\"/></svg>\";\nconst arrowForward = \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\\\"/></svg>\";\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const attrs = vnode.attrs;\n  attrs.register(attrs.position, dom);\n};\n\nexport const createProps = (vnode, { renderer: h, keys: k }) => {\n  const attrs = vnode.attrs;\n  const icon = attrs.position === \"start\"\n    ? attrs.icon || { svg: { content: h.trust(attrs.isRTL ? arrowForward : arrowBackward) } }\n    : attrs.icon || { svg: { content: h.trust(attrs.isRTL ? arrowBackward : arrowForward) } };\n  return {\n    className: [\n      classes.scrollButton,\n      attrs.className || attrs[k.class]\n    ].join(\" \"),\n    icon,\n    ripple: { center: true },\n    events: attrs.events,\n  };\n};\n"],"names":["component","super","row","content","label","textLabel","wash","dropdown","border","contained","disabled","dropdownClosed","dropdownOpen","extraWide","hasDropdown","highLabel","inactive","raised","selected","separatorAtStart","indicator","scrollButton","scrollButtonAtEnd","scrollButtonAtStart","tab","tabContent","tabRow","activeSelectable","isAtEnd","isAtStart","isAutofit","isMenu","scrollable","compactTabs","tabHasIcon","tabRowCentered","tabRowIndent","buttonClasses","SCROLL_SPEED","SCROLL_DELAY","SCROLL_MIN_DURATION","INDICATOR_SLIDE_MIN_DURATION","whenCreateDone","Promise","resolve","getIndex","state","attrs","attrsSelectedTabIndex","selectedTabIndex","undefined","selectedTab","Array","isArray","tabs","reduce","acc","index","scrollButtonGetNewIndex","minTabIndex","maxTabIndex","length","backward","Math","max","forward","min","handleScrollButtonClick","e","direction","stopPropagation","preventDefault","currentTabIndex","newIndex","setSelectedTab","scrollToTab","tabIndex","scroller","tabRowEl","tabLeft","slice","totalWidth","tabData","dom","getBoundingClientRect","width","scrollerWidth","scrollingWidth","scrollWidth","maxScroll","left","isRTL","currentLeft","scrollLeft","duration","abs","delaySeconds","setTimeout","scrollTo","element","to","then","updateScrollButtons","tabsEl","animateIndicator","selectedTabEl","animate","parentRect","rect","buttonSize","managesScroll","height","translateX","right","scaleX","transformCmd","style","tabIndicatorEl","transform","onChange","options","el","sortByLargestWidth","a","b","getInitialState","vnode","createStream","deprecation","option","newOption","registerTabButton","data","registerScrollButton","position","scrollButtons","previousSelectedTabIndex","isTouch","start","end","cleanUp","redrawOnUpdate","merge","onMount","hideIndicator","querySelector","classes","redrawLargestWidth","largestWidth","widths","map","largest","sort","forEach","redraw","handleFontEvent","name","subscribe","unsubscribe","onUnMount","createProps","k","keys","autofit","centered","filterSupportedAttributes","className","activeSelected","compact","menu","tone","class","join","createContent","h","renderer","Tab","ScrollButton","buttons","children","console","error","buttonOpts","buttonOptsCombined","animateOnTap","all","key","register","onSelect","noIndicatorSlide","icon","scrollIconBackward","events","onclick","scrollIconForward","tabIndicator","Icon","_extends","ripple","arrowBackward","arrowForward","svg","trust","center"],"mappings":"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"}