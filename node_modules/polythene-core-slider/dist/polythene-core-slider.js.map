{"version":3,"file":"polythene-core-slider.js","sources":["../src/vars.js","../../polythene-css-classes/slider.js","../src/slider.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nconst lightForeground =                vars.color_light_foreground;\nconst darkForeground =                 vars.color_dark_foreground;\nconst activeColor =                    vars.color_primary; // or override in CSS by setting 'color' property on '.pe-slider'\nconst thumb_size =                     12;\nconst thumb_touch_size =               Math.max(40, thumb_size);\nconst thumb_border_width =             2;\nconst active_thumb_scale =             3/2;\nconst disabled_thumb_scale =           1/2;\nconst active_pin_thumb_scale =         2/6;\nconst largestThumbSize =               active_thumb_scale * thumb_size;\nconst largestElement =                 Math.max(thumb_touch_size, largestThumbSize);\nconst height =                         Math.max(52, largestThumbSize);\nconst side_spacing =                   Math.max(10, largestElement / 2 - thumb_size / 2);\nconst horizontal_layout_side_spacing = side_spacing + 4; // optimization for horizontal layout\n\nexport default {\n  height,\n  side_spacing,\n  horizontal_layout_side_spacing,\n  thumb_size,\n  thumb_touch_size,\n  track_height: height,\n  bar_height: 2,\n  thumb_border_width,\n  active_thumb_scale,\n  animation_duration: vars.animation_duration,\n  disabled_thumb_scale,\n  active_pin_thumb_scale,\n\n  step_width: 2,\n  pin_height: 32,\n  pin_width: 26,\n  pin_font_size: 10,\n\n  color_light_track_active:            rgba(lightForeground, .38),\n  color_light_track_inactive:          rgba(lightForeground, .26),\n  color_light_track_value:             rgba(activeColor),\n  // background color may be set in theme; disabled by default\n  // color_light_thumb_background:        undefined,\n  color_light_thumb_off:               rgba(lightForeground, .26),\n  color_light_thumb_off_focus:         rgba(lightForeground),\n  color_light_thumb_off_focus_opacity: .08,\n  color_light_thumb_on:                rgba(activeColor),\n  color_light_thumb_on_focus_opacity:  .11,\n  color_light_thumb_inactive:          rgba(lightForeground, .26),\n  color_light_tick:                    rgba(lightForeground, 1),\n  color_light_icon:                    rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_disabled_icon:           rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n  color_light_label:                   rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_disabled_label:          rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n\n  color_dark_track_active:             rgba(darkForeground, .3),\n  color_dark_track_inactive:           rgba(darkForeground, .2),\n  color_dark_track_value:              rgba(activeColor),\n  // background color may be set in theme; disabled by default\n  // color_dark_thumb_background:         undefined,\n  color_dark_thumb_off:                rgba(darkForeground, .2),\n  color_dark_thumb_off_focus:          rgba(darkForeground),\n  color_dark_thumb_off_focus_opacity:  .08,\n  color_dark_thumb_on:                 rgba(activeColor),\n  color_dark_thumb_on_focus_opacity:   .11,\n  color_dark_thumb_inactive:           rgba(darkForeground, .2),\n  color_dark_tick:                     rgba(darkForeground, 1),\n  color_dark_icon:                     rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_disabled_icon:            rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n  color_dark_label:                    rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_disabled_label:           rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled)\n};\n","\nexport default {\n  component:      \"pe-slider\",\n\n  // elements\n  control:        \"pe-slider__control\",\n  label:          \"pe-slider__label\",\n  pin:            \"pe-slider__pin\",\n  thumb:          \"pe-slider__thumb\",\n  tick:           \"pe-slider__ticks-tick\",\n  ticks:          \"pe-slider__ticks\",\n  track:          \"pe-slider__track\",\n  trackBar:       \"pe-slider__track-bar\",\n  trackBarValue:  \"pe-slider__track-bar-value\",\n  trackPart:      \"pe-slider__track-part\",\n  trackPartRest:  \"pe-slider__track-rest\",\n  trackPartValue: \"pe-slider__track-value\",\n\n  // states\n  hasFocus:       \"pe-slider--focus\",\n  hasPin:         \"pe-slider--pin\",\n  hasTicks:       \"pe-slider--ticks\",\n  hasTrack:       \"pe-slider--track\",\n  isActive:       \"pe-slider--active\",\n  isAtMin:        \"pe-slider--min\",\n  isDisabled:     \"pe-slider--disabled\",\n};\n","import { isTouch, pointerStartMoveEvent, pointerMoveEvent, pointerEndMoveEvent, isClient, filterSupportedAttributes } from \"polythene-core\";\nimport themeVars from \"./vars\";\nimport classes from \"polythene-css-classes/slider\";\n\nconst MAX_TICKS = 100;\nlet focusElement;\n\nconst deFocus = state => {\n  if (focusElement) {\n    focusElement.blur();\n  }\n  focusElement = undefined;\n  state.hasFocus(false);\n};\n\nconst focus = (state, el) => {\n  deFocus(state);\n  focusElement = el;\n  state.hasFocus(true);\n};\n\nconst positionFromEvent = (e, isVertical) => (\n  // isVertical not yet implemented\n  isTouch && e.touches\n    ? isVertical ? e.touches[0].pageY : e.touches[0].pageX\n    : isVertical ? e.pageY : e.pageX);\n\nconst updatePinPosition = state => {\n  if (state.controlEl && state.pinEl) {\n    const left = state.fraction() * state.rangeWidth;\n    state.pinEl.style.left = left + \"px\";\n  }\n};\n\nconst updateValue = (state, value) => {\n  state.setValue(value, true);\n  updatePinPosition(state);\n};\n\nconst generateTickMarks = (h, stepCount) => {\n  const items = [];\n  let s = stepCount + 1;\n  while (s > 0) {\n    items.push(h(\"div\", {\n      className: classes.tick,\n      key: `tick-${s}`\n    }));\n    s--;\n  }\n  return items;\n};\n\nconst readRangeData = state => {\n  if (state.controlEl && isClient) {\n    // range is from the far left to the far right minus the thumb width (max x is at the left side of the thumb)\n    state.controlWidth = themeVars.thumb_size;\n    state.rangeWidth = state.trackEl.getBoundingClientRect().width - state.controlWidth;\n    const styles = window.getComputedStyle(state.trackEl);\n    state.rangeOffset = parseFloat(styles.marginLeft);\n  }\n};\n\nconst calculateClickOffset = (state, controlOffset = 0) => {\n  state.clickOffset = state.trackEl.getBoundingClientRect().left - (state.rangeOffset - state.controlWidth / 2) + controlOffset;\n};\n\nconst initControlEvent = (state, e) => {\n  const controlPos = state.controlEl.getBoundingClientRect().left;\n  const eventPos = positionFromEvent(e);\n  const controlOffset = eventPos - controlPos - state.controlWidth / 2;\n  calculateClickOffset(state, controlOffset);\n};\n\nconst initTrackEvent = (state) =>\n  calculateClickOffset(state, 0);\n\nconst handlePosEvent = (state, e) => {\n  const pos = positionFromEvent(e) - state.clickOffset;\n  const value = state.min + ((pos - state.rangeOffset) / state.rangeWidth) * (state.max - state.min);\n  updateValue(state, value);\n};\n\nconst startDrag = (state, attrs, e) => {\n  if (state.isDragging()) return;\n  e.preventDefault();\n  state.isDragging(true);\n  state.isActive(true);\n  deFocus(state);\n\n  const drag = e => {\n    if (!state.isDragging()) return;\n    handlePosEvent(state, e);\n  };\n\n  const endDrag = () => {\n    if (!state.isDragging()) return;\n    deFocus(state);\n    if (isClient) {\n      pointerMoveEvent.forEach(evt =>\n        window.removeEventListener(evt, drag));\n      pointerEndMoveEvent.forEach(evt =>\n        window.removeEventListener(evt, endDrag));\n    }\n    state.isDragging(false);\n    state.isActive(false);\n  };\n\n  if (isClient) {\n    pointerMoveEvent.forEach(evt =>\n      window.addEventListener(evt, drag));\n    pointerEndMoveEvent.forEach(evt =>\n      window.addEventListener(evt, endDrag));\n  }\n  readRangeData(state);\n\n  if (attrs.pin) {\n    updatePinPosition(state);\n  }\n};\n\nconst startTrack = (state, attrs, e) => {\n  e.preventDefault();\n  if (state.isDragging()) {\n    return;\n  }\n  readRangeData(state);\n  initTrackEvent(state);\n  handlePosEvent(state, e);\n  startDrag(state, attrs, e);\n};\n\nconst createSlider = (vnode, { h, k, hasTicks, interactiveTrack }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const fraction = state.fraction();\n  const range = state.max - state.min;\n  const stepCount = Math.min(MAX_TICKS, parseInt(range / state.stepSize, 10));\n\n  const onStartTrack = e => (\n    startTrack(state, attrs, e)\n  );\n\n  const onInitDrag = e => {\n    readRangeData(state);\n    initControlEvent(state, e);\n    startDrag(state, attrs, e);\n  };\n\n  const flexValueCss =  fraction + \" 1 0%\";\n  const flexRestValue = 1 - fraction;\n  const flexRestCss =   flexRestValue + \" 1 0%\";\n\n  return h(\"div\",\n    Object.assign(\n      {},\n      { className: classes.track },\n      interactiveTrack && !attrs.disabled && pointerStartMoveEvent.reduce((acc, evt) => (\n        acc[k[`on${evt}`]] = onStartTrack,\n        acc\n      ), {})\n    ),\n    [\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartValue,\n          key: \"trackPartValue\",\n          style: {\n            flex: flexValueCss,\n            msFlex: flexValueCss,\n            WebkitFlex: flexValueCss\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      h(\"div\", Object.assign(\n        {},\n        {\n          className: classes.control,\n          key: \"control\"\n        },\n        attrs.disabled\n          ? { disabled: true }\n          : {\n            [k.tabindex]: attrs[k.tabindex] || 0,\n            [k.onfocus]: () => focus(state, state.controlEl),\n            [k.onblur]: () => deFocus(state),\n            [k.onkeydown]: e => {\n              if (e.key !== \"Tab\") {\n                e.preventDefault();\n              }\n              if (e.key === \"Escape\" || e.key === \"Esc\") {\n                state.controlEl.blur(e);\n              } else if (e.key === \"ArrowLeft\" || e.key === \"ArrowDown\" || e.key === \"Left\" || e.key === \"Down\") {\n                state.decrement(state, e.shiftKey);\n              } else if (e.key === \"ArrowRight\" || e.key === \"ArrowUp\" || e.key === \"Right\" || e.key === \"Up\") {\n                state.increment(state, e.shiftKey);\n              } else if (e.key === \"Home\") {\n                updateValue(state, state.min);\n              } else if (e.key === \"End\") {\n                updateValue(state, state.max);\n              } else if (e.key === \"PageDown\") {\n                state.decrement(state, true);\n              } else if (e.key === \"PageUp\") {\n                state.increment(state, true);\n              }\n              readRangeData(state);\n              updatePinPosition(state);\n            }\n          },\n        !attrs.disabled &&\n          pointerStartMoveEvent.reduce((acc, evt) => (\n            acc[k[`on${evt}`]] = onInitDrag,\n            acc\n          ), {}),\n        attrs.events\n          ? attrs.events\n          : null,\n        hasTicks\n          ? { step: stepCount }\n          : null\n      ),\n      attrs.icon\n        ? h(\"div\",\n          {\n            className: classes.thumb,\n            key: \"icon\"\n          },\n          attrs.icon\n        )\n        : null\n      ),\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartRest,\n          key: \"trackPartRest\",\n          style: {\n            flex: flexRestCss,\n            msFlex: flexRestCss,\n            WebkitFlex: flexRestCss,\n            maxWidth: (flexRestValue * 100) + \"%\" // for IE Edge\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      hasTicks && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.ticks,\n            key: \"ticks\"\n          },\n          generateTickMarks(h, stepCount)\n        )\n        : null,\n      hasTicks && attrs.pin && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.pin,\n            key: \"pin\",\n            value: state.value()\n          }\n        )\n        : null\n    ]\n  );\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n\n  const min = attrs.min !== undefined ? attrs.min : 0;\n  const max = attrs.max !== undefined ? attrs.max : 100;\n  const range = max - min;\n  const stepSize = attrs.stepSize !== undefined\n    ? attrs.stepSize\n    : 1;\n  const defaultValue = attrs.defaultValue !== undefined\n    ? attrs.defaultValue\n    : attrs.value !== undefined\n      ? attrs.value\n      : 0;\n  const previousValue = createStream(undefined);\n  const isActive = createStream(false);\n  const hasFocus = createStream(false);\n  const isDragging = createStream(false);\n  const fraction = createStream(min);\n  const value = createStream(0);\n  const normalizeFactor = 1 / stepSize;\n\n  const setValue = (v, shouldNotify = false) => {\n    if (v < min) v = min;\n    if (v > max) v = max;\n    value(stepSize\n      ? Math.round(v * normalizeFactor) / normalizeFactor\n      : v\n    );\n    fraction((value() - min) / range);\n    if (shouldNotify && attrs.onChange) {\n      attrs.onChange({\n        value: value()\n      });\n    }\n    previousValue(v);\n  };\n\n  const increment = (state, useLargeStep) =>\n    updateValue(state, value() + (useLargeStep ? 10 : 1) * (stepSize || 1));\n\n  const decrement = (state, useLargeStep) =>\n    updateValue(state, value() - (useLargeStep ? 10 : 1) * (stepSize || 1));\n  \n  setValue(defaultValue);\n  \n  return {\n    min,\n    max,\n    stepSize,\n    fraction,\n    // DOM elements\n    trackEl: null,\n    controlEl: null,\n    pinEl: null,\n    // functions\n    setValue,\n    increment,\n    decrement, \n    // streams\n    isDragging,\n    isActive,\n    value,\n    previousValue,\n    hasFocus,\n    // coordinates\n    controlWidth: 0,\n    rangeWidth: 0,\n    rangeOffset: 0,\n    clickOffset: 0,\n    redrawOnUpdate: createStream.merge([isActive, value])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  state.trackEl = dom.querySelector(`.${classes.track}`);\n  state.controlEl = dom.querySelector(`.${classes.control}`);\n  state.pinEl = dom.querySelector(`.${classes.pin}`);\n\n  readRangeData(state);\n\n  if (attrs.pin) {\n    setTimeout(() => {\n      updateValue(state, state.value());\n    }, 0);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.value !== undefined) {\n    if (state.previousValue() !== attrs.value) {\n      state.previousValue(attrs.value);\n      setTimeout(() => state.setValue(state.previousValue()), 0); // perform in next tick to play nice with React\n    }\n  }\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.disabled ? classes.isDisabled : null,\n        attrs.pin ? classes.hasPin : null,\n        interactiveTrack ? classes.hasTrack : null,\n        state.isActive() ? classes.isActive : null,\n        state.hasFocus() ? classes.hasFocus : null,\n        state.fraction() === 0 ? classes.isAtMin : null,\n        hasTicks ? classes.hasTicks : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k }) => {\n  const attrs = vnode.attrs;\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return createSlider(vnode, { h, k, hasTicks, interactiveTrack });\n};\n\n\n"],"names":["rgba","colorStr","opacity","lightForeground","vars","color_light_foreground","darkForeground","color_dark_foreground","activeColor","color_primary","thumb_size","thumb_touch_size","Math","max","thumb_border_width","active_thumb_scale","disabled_thumb_scale","active_pin_thumb_scale","largestThumbSize","largestElement","height","side_spacing","horizontal_layout_side_spacing","track_height","bar_height","animation_duration","step_width","pin_height","pin_width","pin_font_size","color_light_track_active","color_light_track_inactive","color_light_track_value","color_light_thumb_off","color_light_thumb_off_focus","color_light_thumb_off_focus_opacity","color_light_thumb_on","color_light_thumb_on_focus_opacity","color_light_thumb_inactive","color_light_tick","color_light_icon","blend_light_text_secondary","color_light_disabled_icon","blend_light_text_disabled","color_light_label","color_light_disabled_label","color_dark_track_active","color_dark_track_inactive","color_dark_track_value","color_dark_thumb_off","color_dark_thumb_off_focus","color_dark_thumb_off_focus_opacity","color_dark_thumb_on","color_dark_thumb_on_focus_opacity","color_dark_thumb_inactive","color_dark_tick","color_dark_icon","blend_dark_text_secondary","color_dark_disabled_icon","blend_dark_text_disabled","color_dark_label","color_dark_disabled_label","component","control","label","pin","thumb","tick","ticks","track","trackBar","trackBarValue","trackPart","trackPartRest","trackPartValue","hasFocus","hasPin","hasTicks","hasTrack","isActive","isAtMin","isDisabled","MAX_TICKS","focusElement","deFocus","blur","undefined","state","focus","el","positionFromEvent","e","isVertical","isTouch","touches","pageY","pageX","updatePinPosition","controlEl","pinEl","left","fraction","rangeWidth","style","updateValue","value","setValue","generateTickMarks","h","stepCount","items","s","push","className","classes","key","readRangeData","isClient","controlWidth","themeVars","trackEl","getBoundingClientRect","width","styles","window","getComputedStyle","rangeOffset","parseFloat","marginLeft","calculateClickOffset","controlOffset","clickOffset","initControlEvent","controlPos","eventPos","initTrackEvent","handlePosEvent","pos","min","startDrag","attrs","isDragging","preventDefault","drag","endDrag","pointerMoveEvent","forEach","removeEventListener","evt","pointerEndMoveEvent","addEventListener","startTrack","createSlider","vnode","k","interactiveTrack","range","parseInt","stepSize","onStartTrack","onInitDrag","flexValueCss","flexRestValue","flexRestCss","disabled","pointerStartMoveEvent","reduce","acc","flex","msFlex","WebkitFlex","tabindex","onfocus","onblur","onkeydown","decrement","shiftKey","increment","events","step","icon","maxWidth","getInitialState","createStream","defaultValue","previousValue","normalizeFactor","v","shouldNotify","round","onChange","useLargeStep","redrawOnUpdate","merge","onMount","dom","querySelector","setTimeout","createProps","keys","filterSupportedAttributes","tone","class","join","createContent","renderer"],"mappings":"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"}