{"version":3,"file":"polythene-utilities.js","sources":["../src/webfont-loader.js","../src/easing.js","../src/scroll-to.js","../src/timer.js"],"sourcesContent":["import { isServer } from \"polythene-core\";\n\nexport const addWebFont = (vendor, family, key) => {\n  if (isServer) return;\n  if (!window.WebFontConfig) {\n    window.WebFontConfig = {};\n    (function() {\n      let wf = document.createElement(\"script\");\n      wf.src = (document.location.protocol === \"https:\" ? \"https\" : \"http\") + \"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js\";\n      wf.type = \"text/javascript\";\n      wf.async = \"true\";\n      let s = document.getElementsByTagName(\"script\")[0];\n      if (s) {\n        s.parentNode.insertBefore(wf, s);\n      }\n    })();\n  }\n  const vendorCfg = window.WebFontConfig[vendor] || {};\n  vendorCfg.families = vendorCfg.families || [];\n  vendorCfg.families.push(family);\n  if (key) {\n    vendorCfg.key = key;\n  }\n  window.WebFontConfig[vendor] = vendorCfg;\n};\n","/*\nhttps://gist.github.com/gre/1650294\nEasing Functions - inspired from http://gizma.com/easing/\nOnly considering the t value for the range [0, 1] => [0, 1]\n*/\n\nexport const easing = {\n  // no easing, no acceleration\n  linear: t => t,\n  // accelerating from zero velocity\n  easeInQuad: t => t * t,\n  // decelerating to zero velocity\n  easeOutQuad: t => t * (2 - t),\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: t => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  // accelerating from zero velocity\n  easeInCubic: t => t * t * t,\n  // decelerating to zero velocity\n  easeOutCubic: t => (--t) * t * t + 1,\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: t => t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  // accelerating from zero velocity\n  easeInQuart: t => t * t * t * t,\n  // decelerating to zero velocity\n  easeOutQuart: t => 1 - (--t) * t * t * t,\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: t => t < .5 ? 8 * t * t * t * t : 1 - 8* (--t) * t * t * t,\n  // accelerating from zero velocity\n  easeInQuint: t => t * t * t * t * t,\n  // decelerating to zero velocity\n  easeOutQuint: t => 1 + (--t) * t * t * t * t,\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: t => t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t\n};\n","/*\n Animated scroll to a position.\n Derived from https://github.com/madebysource/animated-scrollto\n Adapted to Mithril and rewritten to es6.\n*/\n\nimport { easing } from \"./easing\";\nimport { isServer } from \"polythene-core\";\n\nexport const scrollTo = opts => {\n  if (isServer) {\n    return;\n  }\n  const element = opts.element;\n  const which = (opts.direction === \"horizontal\") ? \"scrollLeft\" : \"scrollTop\";\n  const to = opts.to;\n  const duration = opts.duration * 1000;\n  const easingFn = opts.easing || easing.easeInOutCubic;\n  const start = element[which];\n  const change = to - start;\n  const animationStart = new Date().getTime();\n  let animating = true;\n  return new Promise(resolve => {\n    const animateScroll = () => {\n      if (!animating) {\n        return;\n      }\n      requestAnimFrame(animateScroll);\n      const now = new Date().getTime();\n      const percentage = ((now - animationStart) / duration);\n      const val = start + change * easingFn(percentage);\n      element[which] = val;\n      if (percentage >= 1) {\n        element[which] = to;\n        animating = false;\n        resolve();\n      }\n    };\n    requestAnimFrame(animateScroll);\n  });\n};\n\nconst requestAnimFrame = isServer\n  ? () => {}\n  : (() =>\n    window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || (callback =>\n      window.setTimeout(callback, 1000 / 60)\n    )\n  )();\n","\nimport { isClient } from \"polythene-core\";\n\nexport const Timer = () => {\n  let timerId, startTime, remaining, cb;\n\n  const stop = () => {\n    if (isClient) {\n      window.clearTimeout(timerId);\n    }\n  };\n\n  const pause = () => (\n    stop(),\n    remaining -= new Date() - startTime\n  );\n\n  const startTimer = () => {\n    if (isClient) {\n      stop();\n      startTime = new Date();\n      timerId = window.setTimeout(cb, remaining);\n    }\n  };\n\n  const start = (callback, delaySeconds) => (\n    cb = callback,\n    remaining = delaySeconds * 1000,\n    startTimer()\n  );\n\n  const resume = () =>\n    startTimer();\n\n  return {\n    start,\n    pause,\n    resume,\n    stop\n  };\n};\n"],"names":["addWebFont","vendor","family","key","isServer","window","WebFontConfig","wf","document","createElement","src","location","protocol","type","async","s","getElementsByTagName","parentNode","insertBefore","vendorCfg","families","push","easing","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","scrollTo","element","opts","which","direction","to","duration","easingFn","start","change","animationStart","Date","getTime","animating","Promise","animateScroll","requestAnimFrame","now","percentage","val","resolve","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","callback","Timer","timerId","startTime","remaining","cb","stop","isClient","clearTimeout","pause","startTimer","delaySeconds","resume"],"mappings":"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"}